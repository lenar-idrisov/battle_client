(this.webpackJsonptenzor=this.webpackJsonptenzor||[]).push([[0],[,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAOVBMVEUAAAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD////u2mBXAAAAEXRSTlMAAAc8VCiI8v3fV+tZWFrwh8guxVgAAAABYktHRBJ7vGwAAAAAB3RJTUUH4wodDikCFBGHogAAAUFJREFUWMPt2MsSgyAMBVDFJ775/58tndbWqCDcpB0XZNVNzsShZEiyLMVNI3+HWHaeq6KsQNGmVWWhKKjqptUdJNqkTrdNrQhYNMaYfgBEmzL0NrkpCFi2BhNXz7QlASttIPHjGV3RQ+l6RPx6fbc75XwExI037tIg0eNBotcDxAsvWrz0IsUAL0oM8iLEQC9YDPYCxQgvSIzyAsRI71KM9i5EwPOKkOcRQc8pwp5DZHinIss7EZneQWR7R5Hr7UW+R8RpEvC2BzHP2NPCXaNEfbRGifpW8fW5ZpbwnuC0gpNQgZKfTDyZQxb922zu2zBAL1K3R37iV3l7f6E3rs/jiod+xRRP+h9LPO2nDNHRn2HR2e/TPJPmGdRL80yaZ3Dvr/PMDxZB4qsq8WWa+LpPLdyF5EIXkuIrU+mlbopbxQN8p0JzZJ8cpQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMC0yOVQxNDo0MTowMiswMDowMC0AOiUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTAtMjlUMTQ6NDE6MDIrMDA6MDBcXYKZAAAAAElFTkSuQmCC"},,,,,function(e,t,a){e.exports=a.p+"static/media/avatar2.26a02cf8.png"},function(e,t,a){e.exports=a.p+"static/media/avatar1.688a6031.png"},function(e,t,a){e.exports=a.p+"static/media/3.5bb0a8d9.wav"},function(e,t,a){e.exports=a.p+"static/media/2.79ca65d3.wav"},function(e,t,a){e.exports=a.p+"static/media/1.214a932b.wav"},function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);for(var n=a(0),s=a.n(n),r=a(8),i=a.n(r),o=a(1),c=a(9),l=a(2),m=a(10),u=a(4),p=a(3),d=a(5),h=(a(21),[{num:1,size:1},{num:2,size:1},{num:3,size:1},{num:4,size:1},{num:5,size:2},{num:6,size:2},{num:7,size:2},{num:8,size:3},{num:9,size:3},{num:10,size:4}]),A=a(6),g=a.n(A),f=["\u0410","\u0411","\u0412","\u0413","\u0414","\u0415","\u0416","\u0417","\u0418","\u041a"],v=[1,2,3,4,5,6,7,8,9,10],y=Array.from({length:10},(function(e,t){return{x:-1,y:t}})),E=Array.from({length:10},(function(e,t){return{x:t,y:-1}})),_=[],x=0;x<10;x++)for(var N=0;N<10;N++)_.push({x:x,y:N});function w(e){var t=e.ships.map((function(e,t){var a=30*e.x,n=30*e.y,r="down"==e.dir?30*e.size:30,i="right"==e.dir?30*e.size:30;return s.a.createElement("div",{className:"ship",style:{left:a,top:n,height:r,width:i}})})),a=[];e.player.wonded_ships.forEach((function(e,t){a.push.apply(a,Object(o.a)(e.ship_part))}));var n=[];e.player.killed_ships.forEach((function(e,t){n.push.apply(n,Object(o.a)(e))}));var r=e.player.last_point;return s.a.createElement("div",{className:"matrix"},s.a.createElement("div",{className:"axisX"},y.map((function(e,t){return s.a.createElement("div",{className:"cellX",style:{left:30*e.x,top:30*e.y}},f[t])}))),s.a.createElement("div",{className:"axisY"},E.map((function(e,t){return s.a.createElement("div",{className:"cellY",style:{left:30*e.x,top:30*e.y}},v[t])}))),s.a.createElement("div",{className:"grid"},_.map((function(t,a){return s.a.createElement("div",{className:"cell",style:{left:30*t.x,top:30*t.y},"data-x":t.x,"data-y":t.y,onClick:e.click_handler})}))),s.a.createElement("div",{className:"ship-container"},t.map((function(e,t){return e}))),s.a.createElement("div",{className:"help"},e.player.help_points.map((function(e,t){return s.a.createElement("div",{className:"help_point point",style:{left:30*e.x,top:30*e.y}})}))),s.a.createElement("div",{className:"fail"},e.player.fail_points.map((function(e,t){return s.a.createElement("div",{className:"fail_point point",style:{left:30*e.x,top:30*e.y}},s.a.createElement("div",{className:"fail_icon"}))}))),s.a.createElement("div",{className:"wonded"},a.map((function(e,t){return s.a.createElement("div",{className:"wonded_point point",style:{left:30*e.x,top:30*e.y}},s.a.createElement("img",{src:g.a,alt:"",className:"wonded_icon"}))}))),s.a.createElement("div",{className:"killed"},n.map((function(e,t){return s.a.createElement("div",{className:"killed_point point",style:{left:30*e.x,top:30*e.y}},s.a.createElement("img",{src:g.a,alt:"",className:"killed_icon"}))}))),s.a.createElement("div",{className:"last"},"{}"!=JSON.stringify(r)?s.a.createElement("div",{className:"last_point point",style:{left:30*r.x,top:30*r.y}}):null))}var b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).next=function(){a.props.init_game()},a.render=function(){return s.a.createElement("div",{className:"settings"},a.state.first_page?s.a.createElement("div",{className:"set-names"},s.a.createElement("h1",null,"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"input-container"},s.a.createElement("label",null,"\u0412\u0412\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f"),s.a.createElement("input",{type:"text",name:"human",onChange:a.props.set_names})),s.a.createElement("div",{className:"input-container"},s.a.createElement("label",null,"\u0412\u0412\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),s.a.createElement("input",{type:"text",name:"computer",onChange:a.props.set_names}))),s.a.createElement("button",{className:"button",onClick:a.next},"\u0418\u0433\u0440\u0430\u0442\u044c")):null,a.state.second_page?s.a.createElement("div",{className:"set-ships"},s.a.createElement("h1",null,"\u0420\u0430\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439"),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"input-container"},s.a.createElement("label",{htmlFor:"radio1"},"\u0440\u0430\u0441\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e"),s.a.createElement("input",{type:"radio",id:"radio1",name:"radio",checked:!0,onChange:a.props.generate_ships})),s.a.createElement("div",{className:"input-container"},s.a.createElement("label",{htmlFor:"radio2"},"\u0440\u0430\u0441\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0430\u043c\u043e\u043c\u0443"),s.a.createElement("input",{type:"radio",id:"radio2",name:"radio",onChange:a.props.generate_ships}))),s.a.createElement(w,{ships:a.props.ships}),s.a.createElement("button",{className:"button",onClick:a.next},"\u0418\u0433\u0440\u0430\u0442\u044c")):null)},a.state={first_page:!0,second_page:!1},a}return Object(d.a)(t,e),t}(s.a.Component),S=a(11),O=a.n(S),B=a(12),D=a.n(B),P=a(13),k=a.n(P),C=a(14),j=a.n(C),z=a(15),M=a.n(z);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W={computer:"\u041c\u043e\u0439 \u0445\u043e\u0434, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...",human:"\u0416\u0434\u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0445\u043e\u0434\u0430..."},F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"human";"human"==t?a.setState({human:I({},a.state.human,{},e)}):a.setState({computer:I({},a.state.computer,{},e)})},a.changeSound=function(){a.state.game_sound?a.setState({game_sound:!1}):a.setState({game_sound:!0})},a.randAB=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},a.generateShips=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"human",n=[];h.forEach((function(t){do{e=a.getCoodinatesForShip(t)}while(a.isOverlapShips(e,n));n.push(e)})),a.updateState({ships:n},t)},a.getCoodinatesForShip=function(e){var t,n,s=a.randAB(0,1),r=e.size;return s?(t=a.randAB(0,9),n=a.randAB(0,10-r)):(t=a.randAB(0,10-r),n=a.randAB(0,9)),I({},e,{x:t,y:n,dir:s?"down":"right"})},a.isPointInBorders=function(e,t,a){var n=a.x,s=a.y,r=a.size,i=a.dir;return e>=n-1&&e<=("down"==i?n+1:n+r)&&t>=s-1&&t<=("down"==i?s+r:s+1)},a.isOverlapShips=function(e,t){if(!t.length)return!1;var n=e.x,s=e.y,r=e.size,i=e.dir;return t.some((function(e){return!!a.isPointInBorders(n,s,e)||(!("down"!=i||!a.isPointInBorders(n,s+r-1,e))||!("right"!=i||!a.isPointInBorders(n+r-1,s,e)))}))},a.setNames=function(e){var t=e.target.name,n=e.target.value;"human"==t?(n=n||"\u0421\u0443\u043f\u0435\u0440\u0433\u0435\u0440\u043e\u0439",a.updateState({name:n},t)):(n=n||"\u0417\u043b\u043e\u0434\u0435\u0439",a.updateState({name:n},t))},a.setShips=function(){},a.initGame=function(){a.generateShips("computer"),a.randAB(0,1)?a.setState({game_start:!0,game_active:"human",game_message:W.human}):(a.setState({game_start:!0,game_active:"computer",game_message:W.computer}),setTimeout((function(e){return a.computerPlaying()}),2e3))},a.playing=function(e,t,n){var s,r="human"==e?"computer":"human",i=a.state[r].ships,c=a.state[e],l=c.fail_points,m=c.help_points,u=c.killed_ships,p=c.score,d=c.wonded_ships,h=c.last_success,A={x:t,y:n};i.some((function(i){if(a.isPointInShips(t,n,i)){var c=a.getWondedShipNum(e,i.num);return 100==c?(d.push({num:i.num,ship_part:[{x:t,y:n}]}),s=[{x:t,y:n}]):(d[c].ship_part.push({x:t,y:n}),s=d[c].ship_part),s.length==i.size?(p++,u.push(s),s.forEach((function(e){var t,n=a.getHelpPoints(i);(t=m).push.apply(t,Object(o.a)(n)),m=m.filter((function(e){return e.x>=0&&e.x<=9&&e.y>=0&&e.y<=9}))})),d.splice(c,1),a.updateState({wonded_ships:d,killed_ships:u,help_points:m,last_point:A,score:p},e),a.state.game_sound&&a.soundKilled.play(),"human"==r&&(a.updateState({last_success:[]},e),setTimeout((function(e){return a.computerPlaying()}),2e3)),10==p&&setTimeout((function(t){return a.setState({game_winner:e})}),2e3)):(m.push({x:t-1,y:n-1},{x:t+1,y:n+1},{x:t-1,y:n+1},{x:t+1,y:n-1}),m=m.filter((function(e){return e.x>=0&&e.x<=9&&e.y>=0&&e.y<=9})),a.updateState({wonded_ships:d,help_points:m,last_point:A},e),a.state.game_sound&&a.soundWonded.play(),"human"==r&&(h.push(A),a.updateState({last_success:h},e),setTimeout((function(e){return a.computerPlaying()}),2e3))),!0}return!1}))||(l.push({x:t,y:n}),a.updateState({fail_points:l,last_point:A},e),a.setState({game_message:W[r],game_active:r}),a.state.game_sound&&a.soundFailed.play(),"computer"==r&&setTimeout((function(e){return a.computerPlaying()}),2e3))},a.getHelpPoints=function(e){var t=e.x,a=e.y,n=e.dir,s=e.size,r=[],i=[];if("right"==n)for(var o=0;o<s;o++)r.push({x:t,y:a}),t++;else for(var c=0;c<s;c++)r.push({x:t,y:a}),a++;r.forEach((function(e){var t=e.x,a=e.y;i.push({x:t-1,y:a-1},{x:t+1,y:a+1},{x:t,y:a-1},{x:t,y:a+1},{x:t-1,y:a},{x:t+1,y:a},{x:t-1,y:a+1},{x:t+1,y:a-1})}));var l=new Set(i.map((function(e){return JSON.stringify(e)})));return Array.from(l).map((function(e){return JSON.parse(e)}))},a.humanPlaying=function(e){if("computer"!=a.state.game_active){var t=Number(e.target.getAttribute("data-x")),n=Number(e.target.getAttribute("data-y"));a.playing("human",t,n)}else a.setState()},a.checkPoint=function(e,t){var n=a.state.computer,s=n.trash,r=n.help_points;return s.push.apply(s,Object(o.a)(r)),a.updateState({trash:s},"computer"),console.log("\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u043b\u0430\u0441\u044c \u0442\u043e\u0447\u043a\u0430",e,t),!(e<0||e>9||t<0||t>9)&&!s.some((function(a){return e==a.x&&t==a.y}))},a.computerPlaying=function(){var e,t,n=a.state.computer,s=n.trash,r=n.last_success;do{if(r.length)if(1==r.length){e=r[0].x,t=r[0].y;var i=a.randAB(1,4);1==i&&t--,2==i&&t++,3==i&&e--,4==i&&e++}else if(r.length>1)if(r[0].x==r[1].x){e=r[0].x;var o=a.randAB(0,r.length-1),c=a.randAB(0,1);c=c?1:-1,t=r[o].y+c}else{t=r[0].y;var l=a.randAB(0,r.length-1),m=a.randAB(0,1);m=m?1:-1,e=r[l].x+m}else console.log("\u041d\u0415\u041f\u0420\u0415\u0414\u0412\u0418\u0414\u0415\u041d\u041d\u0410\u042f \u0421\u0418\u0422\u0423\u0410\u0426\u0418\u042f!!!!!",r);else e=a.randAB(0,9),t=a.randAB(0,9)}while(!a.checkPoint(e,t));console.log("\u043e\u0447\u0435\u0440\u0435\u0434\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430, \u043f\u0440\u043e\u0448\u0435\u0434\u0448\u0430\u044f \u043e\u0442\u0431\u043e\u0440",e,t),s.push({x:e,y:t}),a.updateState({trash:s},"computer"),a.playing("computer",e,t)},a.isPointInShips=function(e,t,a){var n,s,r,i,o=a.x,c=a.y,l=a.size;return"down"==a.dir?(n=o,s=o,r=c,i=c+l-1):(n=o,s=o+l-1,r=c,i=c),e>=n&&e<=s&&t>=r&&t<=i},a.getWondedShipNum=function(e,t){var n=100;return a.state[e].wonded_ships.some((function(e,a){return e.num==t&&(n=a,!0)})),n},a.state={human:{name:"\u0421\u0443\u043f\u0435\u0440\u0433\u0435\u0440\u043e\u0439",ships:[],fail_points:[],help_points:[],wonded_ships:[],killed_ships:[],last_point:{},score:0},computer:{name:"\u0417\u043b\u043e\u0434\u0435\u0439",ships:[],fail_points:[],help_points:[],wonded_ships:[],killed_ships:[],last_point:{},score:0,trash:[],last_success:[]},game_start:!1,game_active:"",game_message:"",game_winner:"",game_sound:!0},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.soundFailed=new Audio(k.a),this.soundWonded=new Audio(j.a),this.soundKilled=new Audio(M.a),this.generateShips()}},{key:"render",value:function(){var e=this.state,t=this.state.human,a=this.state.computer;return s.a.createElement("div",null,e.game_start?null:s.a.createElement("div",{className:"modal"},s.a.createElement(b,{set_names:this.setNames,set_ships:this.setShips,player:t.ships,generate_ships:this.generateShips,init_game:this.initGame})),e.game_winner?s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"game_winner"},"human"==e.game_winner?"\u0412\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b\u0438! \u0423\u0440\u0430! :)":"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 :(")):null,s.a.createElement("div",{className:"game-container"},s.a.createElement("header",{className:"header"},s.a.createElement("div",null,"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"),s.a.createElement("div",{className:"sound-bar",onClick:this.changeSound},"\u0437\u0432\u0443\u043a: "+(e.game_sound?"\u0435\u0441\u0442\u044c":"\u043d\u0435\u0442")),s.a.createElement("input",{type:"text",className:"message-bar",value:e.game_message,readOnly:!0})),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"left-content"},"human"==e.game_active?s.a.createElement("div",{className:"left-mask"}):null,s.a.createElement("div",{className:"avatar"},s.a.createElement("a",{href:"https://pngtree.com/so/avatar",target:"_blank"},s.a.createElement("img",{className:"avatar-img",src:D.a})),s.a.createElement("div",{className:"avatar-text"},t.name+" (\u0432\u0430\u0448\u0435 \u043f\u043e\u043b\u0435)")),s.a.createElement(w,{ships:e.human.ships,player:a,click_handler:null})),s.a.createElement("div",{className:"right-content"},"computer"==e.game_active?s.a.createElement("div",{className:"right-mask"}):null,s.a.createElement("div",{className:"avatar"},s.a.createElement("a",{href:"https://pngtree.com/so/avatar",target:"_blank"},s.a.createElement("img",{className:"avatar-img",src:O.a})),s.a.createElement("div",{className:"avatar-text"},a.name+" (\u043f\u043e\u043b\u0435 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430)"," ")),s.a.createElement(w,{ships:[],player:t,click_handler:this.humanPlaying})))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.8d32b1bc.chunk.js.map